<ion-view title="Session Setup">
	<ion-content class="has-header container" overflow-scroll="true" padding="true">

        <div class="spacer spacer-20"></div>
		<h2 class="center">New Session</h2>
        <!--session setup progress-->
        <div class="breadcrumb center">
            <i class="ion-ios-circle-filled"></i>
            <i class="ion-ios-circle-outline"></i>
            <i class="ion-ios-circle-outline"></i>
        </div> 
        <div class="spacer spacer-20"></div>

        <form name="startForm" novalidate  ng-submit="validate(startForm)" class="list">

            <!--Session observers-->
            <ion-item class="item-divider list-head">Add Observer(s)</ion-item>
            <div class="item item-input-inset">
                <label class="item item-input-wrapper">		
                <span class="input-label" >First Name:</span>
                <input type="text" ng-model="Session.firstName">
                </label>
                <label class="item item-input-wrapper">     
                <span class="input-label" >Last Name:</span>
                <input type="text" ng-model="Session.lastName">
                </label>
                <a class="button button-balanced icon ion-person-add" ng-click="addObserver()">&nbsp; Add</a>
            </div>
            
            <!--show active observer names with remove option-->
            <ion-item ng-show="Session.nameResult.length != 0" class="item-divider">Observers in Session</ion-item>
            <ion-list>
                <ion-item ng-repeat="name in Session.nameResult" class="item item-button-right">
                    {{name}}
                    <a class="button button-icon icon ion-close-circled" ng-click="clearObserver(name)"></a>
                </ion-item>
            </ion-list>
            <div class="spacer spacer-10"></div>

            <div ng-show="submitted && Session.nameResult.length == 0 && (Session.firstName == '' || Session.lastName == '')" >
                <div class="error-container">
                    <div class="error">
                        <i class="ion-alert-circled"></i> 
                        First and last name are required fields!
                    </div>
                  <div class="spacer spacer-10"></div>
                </div>
            </div>
            <div ng-show="submitted && Session.firstName != '' && Session.lastName !=''" >
                <div class="error-container">
                    <div class="error">
                        <i class="ion-alert-circled"></i> 
                        Observer needs to be added to session! (press the green button)
                    </div>
                  <div class="spacer spacer-10"></div>
                </div>
            </div>
            <div class="spacer spacer-10"></div>
            <!--end observers-->
            
            <!--Park-->
			<div class="spacer spacer-10"></div>
            <ion-item class="item-divider list-head">Location</ion-item>
            <div ng-class="{ 'has-errors' : (submitted && !parkChecked), 'no-errors' : (submitted && startForm.park.$valid && parkChecked)}">
    			<label ng-hide="parkChecked" class="item item-input">
                    <span class="input-label">Park/Area:</span>
                    <input name="park" type="text" ng-model="Session.park" ng-change="changePark()" required>
                </label>
                <ion-item ng-show="parkChecked" class="item item-button-right">
                    {{Session.park}}
                    <a class="button button-icon icon ion-close-circled" ng-click="clearPark()"></a>
                </ion-item>
            </div>
            <div ng-show="submitted && startForm.park.$error" ng-messages="startForm.park.$error">
                <div class="error-container">
                  <div ng-messages-include="error-list.html"></div>
                  <div class="spacer spacer-10"></div>
                </div>
            </div>

            <!-- Search box for park names-->
            <label class="list" ng-show="Session.park.length > 0 && showList ">
                <ion-item class="item-divider">Select Park</ion-item>
                <div ng-repeat="park in parkNames | filter:Session.park | limitTo:4 ">
                    <ion-radio ng-model="Session.park" value="{{park}}" ng-click="parkSelected()" required>{{park}}</ion-radio>
                </div>
                <div class="spacer spacer-10"></div>
            </label>
            <div ng-show="submitted && !parkChecked && !startForm.park.$error.required" >
                <div class="error-container">
                    <div class="error">
                        <i class="ion-alert-circled"></i> 
                        You must select parks from the provided list!
                    </div>
                  <div class="spacer spacer-10"></div>
                </div>
            </div>
            <!--End Park-->

            <!--Site-->
			<label class="item item-input" ng-class="{ 'has-errors' : (submitted && startForm.site.$invalid), 'no-errors' : (submitted && startForm.site.$valid)}">
                <span class="input-label">Site:</span>
                <input name="site" type="text" ng-model="Session.site" required>
            </label>
            <div ng-show="submitted && startForm.site.$error" ng-messages="startForm.site.$error">
                <div class="error-container">
                  <div ng-messages-include="error-list.html"></div>
                  <div class="spacer spacer-10"></div>
                </div>
            </div>
            <!--End Site-->

    	    <!--ViewingArea-->
            <div class="spacer spacer-20"></div>
            <ion-item class="item-divider list-head">Observeration Mode</ion-item>
            <label class="item item-select" ng-class="{ 'has-errors' : (submitted && startForm.viewingArea.$invalid), 'no-errors' : (submitted && startForm.viewingArea.$valid)}">
                <span class="input-label">Viewing Method:</span>
                <select name="viewingArea" ng-model="Session.viewingArea" required>
                    <option value="Platform">Platform</option>
                    <option value="Boating">Boating</option>
                    <option value="Blind">Blind</option>
    				<option value="Other">Other</option>
                </select>
            </label>
            <div ng-show="Session.viewingArea == 'Other'">
               <label class="item item-input" ng-class="{ 'has-errors' : (submitted && startForm.viewingOther.$invalid), 'no-errors' : (submitted && startForm.viewingOther.$valid)}">
                   <span class="input-label">Description:</span>
                   <input name="viewingOther" ng-model="Session.viewingAreaOther" placeholder="Description" type="text" ng-required="Session.viewingArea == 'Other'">
               </label>
            </div>

            <div ng-show="submitted && startForm.viewingOther.$error" ng-messages="startForm.viewingOther.$error">
                <div class="error-container">
                  <div ng-messages-include="error-list.html"></div>
                  <div class="spacer spacer-10"></div>
                </div>
            </div>

            <div ng-show="submitted && startForm.viewingArea.$error" ng-messages="startForm.viewingArea.$error">
                <div class="error-container">
                  <div ng-messages-include="error-list.html"></div>
                  <div class="spacer spacer-10"></div>
                </div>
            </div>
            <!--End ViewingArea-->

            <!--Stationary-->
            <div class="list">
                <ion-item class="item-divider" ng-class="{ 'has-errors' : (submitted && startForm.stationary.$invalid), 'no-errors' : (submitted && startForm.stationary.$valid)}">Movement During Observation</ion-item>
                <ion-radio name="stationary" ng-model="Session.stationary" value="Stationary" ng-required="Session.stationary == ''">Stationary</ion-radio>
                <ion-radio name="stationary" ng-model="Session.stationary" value="Mobile" ng-required="Session.stationary == ''">Mobile</ion-radio>
            </div>

            <div class="error-container" ng-show="submitted && startForm.stationary.$error" ng-messages="startForm.stationary.$error">
                <div ng-messages-include="error-list.html"></div> 
                <div class="spacer spacer-10"></div>
            </div>
            <!--End Stationary-->
    	   
            <!--Zone type-->
    		<div class="spacer spacer-10"></div>
    		<ion-item class="item-divider list-head">Zone</ion-item>
            <label class="item item-select" ng-class="{ 'has-errors' : (submitted && startForm.zoneSchema.$invalid), 'no-errors' : (submitted && startForm.zoneSchema.$valid)}">
                <span class="input-label">Classification:</span>
                <select name="zoneSchema" ng-model="Session.zoneSchema" ng-change="showZoneSchema(Session.zoneSchema)" required>
                    <option>River</option>
                    <option>Estuary</option>
    				<option>Terrestrial</option>
    			</select>
            </label>
            <div ng-show="submitted && startForm.zoneSchema.$error" ng-messages="startForm.zoneSchema.$error">
                <div class="error-container">
                    <div ng-messages-include="error-list.html"></div>
                    <div class="spacer spacer-10"></div>
                </div>
            </div>

            <div ng-show="Session.zoneSchema != ''" class="center">
                <div class="spacer spacer-20"></div>
                <h3>{{Session.zoneSchema}} Zone Map</h3>
                <br/>
                <img ng-src="{{zoningSchemaPic}}" alt="zoning picture">
                <div class="spacer spacer-20"></div>
            </div>
                
    		<label class="item item-input">
    			<span class="input-label">Comment:</span>
    			<input ng-model="Session.comment" type="text" placeholder="Additional Zone Information">
            </label>
            <!--End Zone type-->
    	    
    	    <div class="spacer spacer-20"></div>
    	    <button class="button button-positive button-block icon-right ion-android-arrow-forward" type="submit">Next</button>
        </form><!--End startForm-->

        <div ng-show="true">
            <a class="button button-positive  button-block icon-right ion-android-arrow-forward" ui-sref="startNewSessionCont">Skip Validation</a>
        </div>

        <!-- Help section-->
            <div class="spacer spacer-30"></div>
                <ion-checkbox ng-model="help.checked">Help</ion-checkbox>
                <div ng-show="help.checked">
                    
                    
                    <div class="row item-divider expando-pane">
                        <div class="col col-center"><h4>Habituation Level</h4></div>
                        <div class="col col-center text-right">
                            <a ng-class="{'button button-small button-icon icon ion-ios-plus-outline':!habituationHelp, 'button button-small button-icon icon ion-ios-minus-outline':habituationHelp}" ng-click="habituationHelp=!habituationHelp"></a>
                        </div>
                    </div>
                    <div ng-model="habituationHelp" ng-show="habituationHelp" class="center" style="text-align: left;">
                            <br>
                            <strong><u>Habituated</u></strong> - Tolerance of people at &lt; 50 m with no noticeable change in behaviour <br>
                            <strong><u>Non-habituated</u></strong> - Normally moves away when people approach and/or displays agitated behaviours.<br>
                            <strong><u>Subadult</u></strong> - May also sub-classify habituation level of subadults.<br>
                            <br>
                    </div>
                    
                    <div class="row item-divider expando-pane">
                        <div class="col col-center"><h4>Feeding/Foraging </h4></div>
                        <div class="col col-center text-right">
                            <a ng-class="{'button button-small button-icon icon ion-ios-plus-outline':!feedingHelp, 'button button-small button-icon icon ion-ios-minus-outline':feedingHelp}" ng-click="feedingHelp=!feedingHelp"></a>
                        </div>
                    </div>
                    <div ng-model="feedingHelp" ng-show="feedingHelp" class="center" style="text-align: left;">
                        <br>
                        <strong><u>Pursuit for food</u></strong> - Actively seeking out food.  Could be moving for purpose of feeding.<br>
                        <strong><u>Green vegetation</u></strong> - Feeding on herbaceous material (i.e., sedges, clovers, grasses, cowparsnip, etc.).  Not to be confused with scavenging carcasses.<br>
                        <strong><u>Berries</u></strong> -  Feeding on berries, i.e., blueberries, rosehips, devil's club, thimble berries, etc.<br>
                        <strong><u>Fishing</u></strong> -  Capture and consumption of live, vigorous fish.<br>
                        <strong><u>Human food</u></strong> - Consumption of human food items, excluding angler's fish.<br><br>
                    
                    </div>
                    
                    <div class="row item-divider expando-pane">
                        <div class="col col-center"><h4>Non-Interactive</h4></div>
                        <div class="col col-center text-right">
                            <a ng-class="{'button button-small button-icon icon ion-ios-plus-outline':!nIHelp, 'button button-small button-icon icon ion-ios-minus-outline':nIHelp}" ng-click="nIHelp=!nIHelp"></a>
                        </div>
                    </div>
                    <div ng-model="nIHelp" ng-show="nIHelp" class="center" style="text-align: left;">
                        <br>
                        <strong><u>Loafing/Resting</u></strong> - Not moving, non-interactive, may be sitting or standing<br>
                        <strong><u>Sleeping</u></strong> - Bear sleeping<br>
                        <strong><u>Walking</u></strong> - Bear walking but not pursuing food, without interest<br>
                        <strong><u>Running</u></strong> - Running to or from no apparent stimulus.<br>
                        <br>
                    </div>
                    
                    <div class="row item-divider expando-pane">
                        <div class="col col-center"><h4>Bear-Bear Interaction</h4></div>
                        <div class="col col-center text-right">
                            <a ng-class="{'button button-small button-icon icon ion-ios-plus-outline':!bBiHelp, 'button button-small button-icon icon ion-ios-minus-outline':bBiHelp}" ng-click="bBiHelp=!bBiHelp"></a>
                        </div>
                    </div>
                    <div ng-model="bBiHelp" ng-show="bBiHelp" class="center" style="text-align: left;">
                        <br>
                        <strong><u>Alert/Vigilance</u></strong> - Interaction between individuals is evident but behaviour uncertain. Looking and/or sniffing intently towards another bear.<br>
                        <strong><u>Playing</u></strong> - Non-agonistic amicable behaviour, wrestling, chasing, etc.<br>
                        <strong><u>Fighting</u></strong> - Agonistic interaction with or without vocalization.<br>
                        <strong><u>Defense</u></strong> - Active or passive deferral to aggressor, retreat orstanding ground.<br>
                        <br>
                    </div>
                    
                    <div class="row item-divider expando-pane">
                        <div class="col col-center"><h4>Bear-Human Interaction</h4></div>
                        <div class="col col-center text-right">
                            <a ng-class="{'button button-small button-icon icon ion-ios-plus-outline':!bHIHelp, 'button button-small button-icon icon ion-ios-minus-outline':bHIHelp}" ng-click="bHIHelp=!bHIHelp"></a>
                        </div>
                    </div>
                    <div ng-model="bHIHelp" ng-show="bHIHelp" class="center" style="text-align: left;">
                    <br>
                    <strong><u>Bear Response:</u></strong><br><br>
                    <strong><u>Alert/Vigilance</u></strong> - Interaction with human is evident but behaviour uncertain. Looking and/or sniffing and/or standingon hind legs toward humans or vehicle. Stop, watch, stare, stand to investigate.<br>
                    <strong><u>Retreat</u></strong> - Actively increase distance away from human or vehicle<br>
                    <strong><u>Bear Approach</u></strong> - Bear approaches human, record closest distance.<br>
                    <br>
                    </div>
                    
                    
                    <div class="row item-divider expando-pane">
                        <div class="col col-center"><h4>Human-Bear Interaction</h4></div>
                        <div class="col col-center text-right">
                            <a ng-class="{'button button-small button-icon icon ion-ios-plus-outline':!hBIHelp, 'button button-small button-icon icon ion-ios-minus-outline':hBIHelp}" ng-click="hBIHelp=!hBIHelp"></a>
                        </div>
                    </div>
                    <div ng-model="hBIHelp" ng-show="hBIHelp" class="center" style="text-align: left;">
                    <br>
                    <strong><u>Human response:</u></strong><br><br>
                    
                    <strong><u>Alert/Vigilance</u></strong> - Stop activity, watch, stare. Do not move.<br>
                    <strong><u>Retreat</u></strong> - Back away, walk away, run away.<br>
                    <strong><u>Approach</u></strong> bear - Human approaches bear, record closest distance. <strong>Note:<strong> run towards, walk towards.<br>
                    <strong><u>Aggression</u></strong> - Yelling, hit with sticks, throw rocks, etc.<br>
                    <strong><u>Enticing</u></strong> - Make fish whole or entrails obviously available to bears.  Make garbage of human food available to bears.  Try to attract bear(s).<br>
                    <br>
                    </div>
                    
                    
                    <div class="row item-divider expando-pane">
                        <div class="col col-center"><h4>Other</h4></div>
                        <div class="col col-center text-right">
                            <a ng-class="{'button button-small button-icon icon ion-ios-plus-outline':!otherHelp, 'button button-small button-icon icon ion-ios-minus-outline':otherHelp}" ng-click="otherHelp=!otherHelp"></a>
                        </div>
                    </div>
                    <div ng-model="otherHelp" ng-show="otherHelp" class="center" style="text-align: left;">
                    <br>
                    <strong><u>Other</strong></u> - Behaviour not on above list, e.g., interaction with dogs or other wildlife. <br>
                    <br>
                    </div>

        <div class="spacer spacer-40"></div>
	   	</ion-content>
</ion-view>

<!--generic error messages-->
<script id="error-list.html" type="text/ng-template">  
    <div class="error" ng-message="required">
        <i class="ion-alert-circled"></i> 
        The field above is required!
    </div>
    <div class="error" ng-message="minlength">
        <i class="ion-alert-circled"></i> 
        Minimum length of this field is 2 characters!
    </div>
    <div class="error" ng-message="maxlength">
        <i class="ion-alert-circled"></i> 
        Maximum length of this field is 25 characters!
    </div>
</script> 